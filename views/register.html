<!DOCTYPE html>
<html lang="en">

<head>
    <title>Login</title>
    <link rel="stylesheet" href="/assets/css/register.css">
</head>

<body>
    <div class="form">
        <h1>Welcome</h1>
        <h2>Username</h2>
        <div class="textbox">
            <input placeholder="" id="username">
        </div>
        <h2>Password</h2>
        <div class="textbox">
            <input placeholder="" id="password">
        </div>
        <br>
        <button class="button" onclick="reg()"> Create Account</button>
        <br>
        <div class="forgor">
            <a href="login.html">Have an account?</a>
        </div>
        <script>
            const fs = require('fs');

            function reg() {
                //storing user input
                var input_username = document.getElementById("username").value;
                var input_password = document.getElementById("password").value;
                //reading the json file
                fetch("../data/datauser.json")
                    .then(response => response.json())
                    .then(data => {
                        console.log(data.username)
                        found = false
                        for (i = 0; i < data.length; i++) {
                            if (input_username == data[i].username) {
                                found = true
                            }
                        }
                        if (found == true) {
                            window.alert("Username tidak tersedia")
                        } else {
                            const datauser = {
                                username: input_username,
                                password: input_password
                            }
                            activeuser = JSON.stringify(datauser) //ceritanya bakal diwrite ke file JSON baru nanti page profile dll tinggal read dari JSONnya aja
                            location.href = "home.html" //sesuaikan sama page home
                        }

                    })
            }
        </script>
    </div>

</body>

</html>